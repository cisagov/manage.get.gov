{% extends "domain_base.html" %}

{% block title %}Records | {{ domain.name }} | {% endblock %}

{% block breadcrumb %}
    {% include "includes/domain_breadcrumbs.html"%}
{% endblock breadcrumb %}

<!-- Form messages -->
{% block message_alerts %}
<div id="messages-container" hx-get="{% url 'get-messages' %}" hx-trigger="messagesRefresh from:body">
</div>
{% endblock message_alerts%}


{% block domain_content %}
    <div x-data="{ showFormId: null }">
    {% include "includes/form_errors.html" with form=form %}
    <div id="dnsrecords-form-container" x-data="{recordType: '' }">
        <div class="display-flex flex-align-center">
            <div class="grid-col">
                <h1>Records</h1>
            </div>
            
            <div class="grid-col-auto">
                <button
                    class="usa-button"
                    id="add-dnsrecord-button"
                    type="button"
                    x-on:click="showFormId = 1000"
                >
                    Add record
                </button>
            </div>
        </div>
    
        <div class="grid-row">
            <div class="grid-col-12">
                <p class="measure-none">
                    Review, add and edit DNS records. Edits will go into effect once saved.
                </p>
                <p class="measure-none">
                    Click "Add record" and enter the values that you need to enter so everything and everyone can get the work done here.
                </p>

                <div x-cloak x-show="showFormId == 1000">
                    {% include "includes/required_fields.html" %}
                
                    <section class="section-outlined section-outlined--extra-padding">
                    <form 
                        class="usa-form usa-form--extra-large"
                        hx-post="{% url 'domain-dns-records' domain.pk %}"
                        hx-swap="innerHTML show:top"
                        method="post"
                        novalidate id="form-container"
                        x-cloak
                        x-ref="dnsForm"
                        x-show="showFormId == 1000"
                        @record-submit-success.camel="showFormId = null"
                    >
                        {% include "domain_dns_record_form_content.html" with form=form %}
                    </form>
                    </section>
                </div>
             </div>
        </div>
    </div>
    
    {% include "domain_dns_records_table.html" %}
     </div>

{% endblock %}  {# domain_content #}