{% extends "domain_base.html" %}

{% block title %}Records | {{ domain.name }} | {% endblock %}

{% block breadcrumb %}
    {% include "includes/domain_breadcrumbs.html"%}
{% endblock breadcrumb %}

<!-- Form messages -->
{% block message_alerts %}
<div id="messages-container" hx-get="{% url 'get-messages' %}" hx-trigger="messagesRefresh from:body">
</div>
{% endblock message_alerts%}

{% block domain_content %}
    {% include "includes/form_errors.html" with form=form %}
    <div id="dnsrecords-form-container" x-data="{ show_form: false, recordType: '' }">
        <div class="display-flex flex-align-center">
            <div class="grid-col">
                <h1>DNS records</h1>
            </div>
            
            <div class="grid-col-auto">
                <button
                    class="usa-button"
                    id="add-dnsrecord-button"
                    type="button"
                    x-on:click="show_form = true"
                >
                    Add record
                </button>
            </div>
        </div>
    
        <div class="grid-row">
            <div class="grid-col-12">
                <p class="measure-none">
                    Review, add, and edit DNS records for this domain. Changes take effect once they’re saved.                </p>
                <p class="measure-none">
                    To create a new record, select “Add record” and enter the required values. To update an existing record, click “Edit.”
                </p>
                <div x-cloak x-show="show_form">
                    {% include "includes/required_fields.html" %}
                
                    <section class="section-outlined section-outlined--extra-padding">
                    <form 
                        class="usa-form usa-form--extra-large"
                        hx-post="{% url 'domain-dns-records' domain.pk %}"
                        hx-swap="innerHTML show:top"
                        method="post"
                        novalidate id="form-container"
                        x-cloak
                        x-ref="dnsForm"
                        x-show="show_form"
                        @record-submit-success.camel="show_form = false"
                    >
                        {% include "domain_dns_record_form_content.html" with form=form %}
                    </form>
                    </section>
                </div>
             </div>
        </div>
    </div>
    
    {% include "domain_dns_records_table.html" %}

    {% include "domain_dns_nameservers_table.html" %}
{% endblock %}  {# domain_content #}